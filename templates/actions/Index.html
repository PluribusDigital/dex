<div class="usa-banner-content" id="main-content">
  <h1>{{ pageTitle }}</h1>
    <a class="usa-button usa-button-primary create-btn" href="#/create-action">Create new action</a>
</div>

<table class="usa-table-borderless" ng-show="adminActions.length > 0">
  <caption><h4 class="tab wip-tab active-tab" ng-click="switchWip($event)">Needs Attention</h4><h4 class="tab recent-tab" ng-click="switchWip($event)">Recent Actions</h4></caption>
  <thead>
    <tr>
      <th scope="col">Action</th>
      <th scope="col">Provider</th>
      <th scope="col">Date</th>
      <th scope="col">Source</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody ng-if="wip">
    <tr ng-repeat="action in adminActions | filter:'under_review'">
      <td><span  uib-tooltip="This item is expired. Please reinstate. Click on ths icon to start the process" type="button" class="urgent-icon  hidden" ng-click="setProvider(action.provider)">!</span>
        <a href="#/actions/{{action.id}}">
        <span class="usa-label"> {{action.action_type}}</span></a> 
      </td>
      <td><a href="#/providers/{{action.provider.id}}">{{ action.provider.name | titlecase}}</a></td>
      <td>{{ action.created_timestamp | date:'MM/dd/yyyy' }}</td>
      <td><span>{{ action.createdBy }}</span>
      <td>{{ action.status | unsnake | titlecase }}</td>
    </tr>
  </tbody>
  <tbody ng-if="!wip">
    <tr ng-repeat="action in adminActions | filter: {createdBy: 'CMS'}">
      <td><a href="#/actions/{{action.id}}">
        <span class="usa-label">
          {{action.action_type}}
        </span></a>
      </td>
      <td><a href="#/providers/{{action.provider.id}}">{{ action.provider.name | titlecase}}</a></td>
      <td>{{ action.created_timestamp | date:'MM/dd/yyyy' }}</td>
      <td><span>{{ action.createdBy }}</span>
      <td>{{ action.status | unsnake | titlecase }}</td>
    </tr>
  </tbody>
</table>

<table class="usa-table-borderless" ng-show="stateActions.length > 0">
  <caption><h4 class="tab active-tab" ng-click="switchWip($event, stateActions)">Needs Response</h4><h4 class="tab state-recent-tab" ng-click="switchWip($event, stateActions)">Recent Actions</h4></caption>
  <thead>
    <tr>
      <th scope="col">Action</th>
      <th scope="col">Provider</th>
      <th scope="col">Date</th>
      <th scope="col">Source</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody ng-if="wip">
    <tr ng-repeat="action in stateActions">
      <td><a href="#/actions/{{action.id}}">
        <span class="usa-label">
          {{action.action_type}}
        </span></a><!--<span ng-click="delete(action)">x</span>-->
      </td>
      <td><a href="#/providers/{{action.provider.id}}">{{ action.provider.name | titlecase }}</a></td>
      <td>{{ action.created_timestamp | date:'MM/dd/yyyy' }}</td>
      <td>{{ action.createdBy }}</td>
      <td>
        <div ng-hide=action.response>
          <a class="usa-button" ng-click="markFound(action.id)">
            <i class="gi gi-check"></i>
            Found
          </a>
          <a class="usa-button" ng-click="markNotFound(action.id)">
            <i class="gi gi-times"></i>
            Not Found
          </a>
        </div>
        <div ng-show=action.response>
          <span disabled class="usa-button usa-button-gray usa-button-disabled dex-action-button-show-{{action.response=='Found'}}">
            <i class="gi gi-check"></i>
            Found
          </span>
          <span disabled class="usa-button usa-button-gray usa-button-disabled dex-action-button-show-{{action.response=='Not Found'}}">
            <i class="gi gi-times"></i>
            Not Found
          </span>
        </div>
      </td>
    </tr>
  </tbody>
  <tbody ng-if="!wip">
    <tr ng-repeat="action in filteredActions ">
      <td><a href="#/actions/{{action.id}}">
        <span class="usa-label">
          {{action.action_type}}
        </span></a>
      </td>
      <td><a href="#/providers/{{action.provider.id}}">{{ action.provider.name | titlecase }}</a></td>
      <td>{{ action.created_timestamp | date:'MM/dd/yyyy' }}</td>
      <td>{{ action.createdBy }}</td>
      <td>
        <div ng-hide=action.response>
          <a class="usa-button" ng-click="markFound(action.id)">
            <i class="gi gi-check"></i>
            Found
          </a>
          <a class="usa-button" ng-click="markNotFound(action.id)">
            <i class="gi gi-times"></i>
            Not Found
          </a>
        </div>
        <div ng-show=action.response>
          <span disabled class="usa-button usa-button-gray usa-button-disabled dex-action-button-show-{{action.response=='Found'}}">
            <i class="gi gi-check"></i>
            Found
          </span>
          <span disabled class="usa-button usa-button-gray usa-button-disabled dex-action-button-show-{{action.response=='Not Found'}}">
            <i class="gi gi-times"></i>
            Not Found
          </span>
        </div>
      </td>
    </tr>
  </tbody>
</table>
